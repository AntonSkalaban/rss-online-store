(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),p:"/"};t.d({},{Z:()=>T});const e=[{id:1,title:"iPhone 9",description:"An apple mobile which is nothing like apple",price:549,discountPercentage:12.96,rating:4.69,stock:94,brand:"Apple",category:"smartphones",thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg"]},{id:2,title:"iPhone X",description:"SIM-Free, Model A19211 6.5-inch Super Retina HD display with OLED technology A12 Bionic chip with ...",price:899,discountPercentage:17.94,rating:4.44,stock:34,brand:"Apple",category:"smartphones",thumbnail:"https://i.dummyjson.com/data/products/2/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/2/1.jpg","https://i.dummyjson.com/data/products/2/2.jpg","https://i.dummyjson.com/data/products/2/3.jpg","https://i.dummyjson.com/data/products/2/thumbnail.jpg"]},{id:3,title:"Samsung Universe 9",description:"Samsung's new variant which goes beyond Galaxy to the Universe",price:1249,discountPercentage:15.46,rating:4.09,stock:36,brand:"Samsung",category:"smartphones",thumbnail:"https://i.dummyjson.com/data/products/3/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/3/1.jpg"]},{id:4,title:"OPPOF19",description:"OPPO F19 is officially announced on April 2021.",price:280,discountPercentage:17.91,rating:4.3,stock:123,brand:"OPPO",category:"smartphones",thumbnail:"https://i.dummyjson.com/data/products/4/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/4/1.jpg","https://i.dummyjson.com/data/products/4/2.jpg","https://i.dummyjson.com/data/products/4/3.jpg","https://i.dummyjson.com/data/products/4/4.jpg","https://i.dummyjson.com/data/products/4/thumbnail.jpg"]},{id:5,title:"Huawei P30",description:"Huawei’s re-badged P30 Pro New Edition was officially unveiled\n      yesterday in Germany and now the device has made its way to the UK.",price:499,discountPercentage:10.58,rating:4.09,stock:32,brand:"Huawei",category:"smartphones",thumbnail:"https://i.dummyjson.com/data/products/5/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/5/1.jpg","https://i.dummyjson.com/data/products/5/2.jpg","https://i.dummyjson.com/data/products/5/3.jpg"]},{id:6,title:"MacBook Pro",description:"MacBook Pro 2021 with mini-LED display may launch between September, November",price:1749,discountPercentage:11.02,rating:4.57,stock:83,brand:"APPle",category:"laptops",thumbnail:"https://i.dummyjson.com/data/products/6/thumbnail.png",images:["https://i.dummyjson.com/data/products/6/1.png","https://i.dummyjson.com/data/products/6/2.jpg","https://i.dummyjson.com/data/products/6/3.png","https://i.dummyjson.com/data/products/6/4.jpg"]},{id:7,title:"Samsung Galaxy Book",description:"Samsung Galaxy Book S (2020) Laptop With Intel Lakefield Chip, 8GB of RAM Launched",price:1499,discountPercentage:4.15,rating:4.25,stock:50,brand:"Samsung",category:"laptops",thumbnail:"https://i.dummyjson.com/data/products/7/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/7/1.jpg","https://i.dummyjson.com/data/products/7/2.jpg","https://i.dummyjson.com/data/products/7/3.jpg","https://i.dummyjson.com/data/products/7/thumbnail.jpg"]},{id:8,title:"Microsoft Surface Laptop 4",description:"Style and speed.  Stand out on HD video calls backed by Studio Mics. Capture ideas on the vibrant touchscreen.",price:1499,discountPercentage:10.23,rating:4.43,stock:68,brand:"Microsoft Surface",category:"laptops",thumbnail:"https://i.dummyjson.com/data/products/8/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/8/1.jpg","https://i.dummyjson.com/data/products/8/2.jpg","https://i.dummyjson.com/data/products/8/3.jpg","https://i.dummyjson.com/data/products/8/4.jpg","https://i.dummyjson.com/data/products/8/thumbnail.jpg"]},{id:9,title:"Infinix INBOOK",description:"Infinix Inbook X1 Ci3 10th 8GB 256GB 14 Win10 Grey – 1 Year Warranty",price:1099,discountPercentage:11.83,rating:4.54,stock:96,brand:"Infinix",category:"laptops",thumbnail:"https://i.dummyjson.com/data/products/9/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/9/1.jpg","https://i.dummyjson.com/data/products/9/2.png","https://i.dummyjson.com/data/products/9/3.png","https://i.dummyjson.com/data/products/9/4.jpg","https://i.dummyjson.com/data/products/9/thumbnail.jpg"]},{id:10,title:"HP Pavilion 15-DK1056WM",description:"HP Pavilion 15-DK1056WM Gaming Laptop 10th Gen Core i5, 8GB, 256GB SSD, GTX 1650 4GB, Windows 10",price:1099,discountPercentage:6.18,rating:4.43,stock:89,brand:"HP Pavilion",category:"laptops",thumbnail:"https://i.dummyjson.com/data/products/10/thumbnail.jpeg",images:["https://i.dummyjson.com/data/products/10/1.jpg","https://i.dummyjson.com/data/products/10/2.jpg","https://i.dummyjson.com/data/products/10/3.jpg","https://i.dummyjson.com/data/products/10/thumbnail.jpeg"]},{id:11,title:"perfume Oil",description:"Mega Discount, Impression of Acqua Di Gio by GiorgioArmani concentrated attar perfume Oil",price:13,discountPercentage:8.4,rating:4.26,stock:65,brand:"Impression of Acqua Di Gio",category:"fragrances",thumbnail:"https://i.dummyjson.com/data/products/11/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/11/1.jpg","https://i.dummyjson.com/data/products/11/2.jpg","https://i.dummyjson.com/data/products/11/3.jpg","https://i.dummyjson.com/data/products/11/thumbnail.jpg"]},{id:12,title:"Brown Perfume",description:"Royal_Mirage Sport Brown Perfume for Men & Women - 120ml",price:40,discountPercentage:15.66,rating:4,stock:52,brand:"Royal_Mirage",category:"fragrances",thumbnail:"https://i.dummyjson.com/data/products/12/thumbnail.jpg",images:["https://i.dummyjson.com/data/products/12/1.jpg","https://i.dummyjson.com/data/products/12/2.jpg","https://i.dummyjson.com/data/products/12/3.png","https://i.dummyjson.com/data/products/12/4.jpg","https://i.dummyjson.com/data/products/12/thumbnail.jpg"]}],i=(t,e)=>{const i=document.createElement(t);return e&&i.classList.add(e),i},r=t=>{const e=i("div","page-block"),r=i("div","page-block__header"),a=i("div","page-block__main");return e.classList.add(t),e.appendChild(r),e.appendChild(a),[e,r,a]},a=(t,e,a)=>{const[o,n,d]=r(t),s=i("h4","page-block__title");return s.classList.add(e),s.textContent=a,n.appendChild(s),[o,d]},o=(t,e)=>{const r=i("button","page-btn");return r.classList.add(t),r.textContent=e,r},n=(t,e)=>{const r=t=>{((t,e)=>{var i;const r=t.target,a=r.value,o=r.checked;let n=new URL(window.location.href).search.substring(1).split("&");if(o)window.location.href.includes(e)?n=n.map((t=>t.includes(e)?`${t}↕${a}`:t)):(n.push(`${e}=${a}`),n[0]||n.shift());else{const t=null===(i=n.find((t=>t.includes(e))))||void 0===i?void 0:i.split("=")[1].split("%E2%86%95");n=t&&t.length>1?n.map((i=>i.includes(e)?`${e}=${t.filter((t=>t!==a)).join("↕")}`:i)):n.filter((t=>!t.includes(e)))}T(n)})(t,e)},[o,n]=a("filter-block","filter-title",e.replace(e[0],e[0].toUpperCase())),d=i("ul",`${e}__list`);return t.map((t=>String(t[e]).toLowerCase())).filter(((t,e,i)=>i.indexOf(String(t).toLowerCase())===e)).forEach((a=>{const o=i("li",`${e}__list-item`),n=i("label",`${e}__label`),s=i("input",`${e}__checkbox`);s.type="checkbox",s.value=String(a).toLowerCase();const c=i("p",`${e}__items-counter`),p=i("span",`${e}__total-items`),l=i("span",`${e}__avalible-items`);p.textContent=`${t.filter((t=>String(a).toLowerCase()===String(t[e]).toLowerCase())).length}`,l.textContent="0",l.dataset.id=String(a).toLowerCase(),c.appendChild(l),c.innerHTML+="/",c.appendChild(p),d.appendChild(o),o.appendChild(n),n.appendChild(s),n.innerHTML+=a,o.appendChild(c),n.addEventListener("change",r)})),n.appendChild(d),o},d=(t,e)=>{const r=t=>{const i=t.target,r=i.value,a=o.map((t=>Math.abs(+t-+r))),n=Math.min(...a),d=String(o[a.indexOf(n)]);i.value=d,(t=>{let e=new URL(window.location.href).search.substring(1).split("&");const i=document.querySelector(`.lower-${t}-slider`),r=document.querySelector(`.upper-${t}-slider`);if(!i||!r)return;const a=Math.min(+i.value,+r.value),o=Math.max(+i.value,+r.value);window.location.href.includes(t)?e=e.map((e=>e.includes(t)?`${t}=${a}%E2%86%95${o}`:e)):(e.push(`${t}=${a}%E2%86%95${o}`),e[0]||e.shift()),T(e)})(e)},o=t.map((t=>t[e])).filter(((t,e,i)=>e===i.indexOf(t))).sort(((t,e)=>+t-+e)),[n,d]=a("filter-block","filter-title",`${e.replace(e[0],e[0].toUpperCase())}`),s=i("div","range-slider"),c=i("div","range-input"),p=i("input",`lower-${e}-slider`),l=i("input",`upper-${e}-slider`);p.type="range",p.id=`lower-${e}`,p.min=String(o[0]),p.max=String(o[o.length-1]),l.type="range",l.id=`upper-${e}`,l.min=String(o[0]),l.max=String(o[o.length-1]);const u=i("div","range-values"),m=i("p",`lower-${e}-value`),h=i("p",`upper-${e}-value`);return n.appendChild(d),d.appendChild(s),d.appendChild(c),c.appendChild(p),c.appendChild(l),d.appendChild(u),u.appendChild(m),u.appendChild(h),p.addEventListener("input",r),l.addEventListener("input",r),n},s=t=>{const e=i("div","filter-section"),r=(()=>{const t=i("div","filter-buttons-container"),e=o("reset-btn","Reset Filters"),r=o("copy-btn","Copy link");return t.appendChild(e),t.appendChild(r),e.addEventListener("click",(()=>{document.querySelectorAll(".category__checkbox").forEach((t=>t.checked=!1)),document.querySelectorAll(".brand__checkbox").forEach((t=>t.checked=!1)),T([""])})),r.addEventListener("click",(()=>null)),t})(),a=n(t,"category"),s=n(t,"brand"),c=d(t,"price"),p=d(t,"stock");return e.appendChild(r),e.appendChild(a),e.appendChild(s),e.appendChild(c),e.appendChild(p),e},c=()=>{const[t,e,a]=r("products-section");a.classList.add("products-section__main");const o=(()=>{const t=i("select","sort-input");t.classList.add("main-input");const e=i("option","select-option");e.disabled=!0,e.selected=!0,e.value="",e.textContent="Sort options";const r=i("option","select-option"),a=i("option","select-option"),o=i("option","select-option"),n=i("option","select-option"),d=i("option","select-option"),s=i("option","select-option");return r.value="price-ASC",a.value="price-DESC",o.value="rating-ASC",n.value="rating-DESC",d.value="discountPercentage-ASC",s.value="discountPercentage-DESC",r.text="sort by price ASC",a.text="sort by price DESC",o.text="sort by rating ASC",n.text="sort by rating DESC",d.text="sort by discount ASC",s.text="sort by discont DESC",t.add(e),t.add(r),t.add(a),t.add(o),t.add(n),t.add(d),t.add(s),t.addEventListener("change",(t=>{(t=>{let e=new URL(window.location.href).search.substring(1).split("&");const i=t.target,r=null==i?void 0:i.value;window.location.href.includes("sort")?e=e.map((t=>t.includes("sort")?`sort=${r}`:t)):(e.push(`sort=${r}`),e[0]||e.shift()),T(e)})(t)})),t})(),n=i("h2","products-section__title"),d=(()=>{const t=i("input","search-input");return t.placeholder="Search...",t.addEventListener("keyup",(t=>{(t=>{let e=new URL(window.location.href).search.substring(1).split("&");const i=t.target.value.toLocaleLowerCase();window.location.href.includes("search")?e=i?e.map((t=>t.includes("search")?`search=${i}`:t)):e.filter((t=>!t.includes("search"))):(e.push(`search=${i}`),e[0]||e.shift()),T(e)})(t)})),t})(),s=(()=>{const t=t=>{(t=>{var e;let i=new URL(window.location.href).search.substring(1).split("&");const r=null===(e=t.target.dataset)||void 0===e?void 0:e.size;window.location.href.includes("grid")?i=i.map((t=>t.includes("grid")?`grid=${r}`:t)):(i.push(`grid=${r}`),i[0]||i.shift()),T(i)})(t)},e=i("div","cards-views-container"),r=i("p","grid-size"),a=i("p","grid-size");return r.textContent="Big grid",a.textContent="Small grid",r.dataset.size="big",a.dataset.size="small",r.addEventListener("click",t),a.addEventListener("click",t),e.appendChild(r),e.appendChild(a),e})();return e.classList.add("products-section__header"),e.appendChild(o),e.appendChild(n),e.appendChild(d),e.appendChild(s),t},p=new class{constructor(){this.cart={products:{},totalAmount:0,totalSum:0,promoCodes:{epm:5,rs:10},appliedPromoCodes:[]},this.getLocalCartStorage()}getLocalCartStorage(){if(localStorage.getItem("cart")){const t=JSON.parse(localStorage.getItem("cart"));this.cart.products=t.products,this.cart.totalAmount=t.totalAmount,this.cart.totalSum=t.totalSum}}getCart(){return this.cart}addProduct(t){return this.cart.products[t.title]?this.cart.products[t.title]&&(this.cart.products[t.title].amount+=1):this.cart.products[t.title]={product:t,amount:1},this.cart.totalAmount+=1,this.cart.totalSum+=t.price,this.setLocalCartStorage(this.getCart()),this.getCart()}dropProduct(t){const e=this.cart.products[t.title].amount,i=this.cart.products[t.title].product.price;return this.cart.totalAmount-=e,this.cart.totalSum-=e*i,this.deleteProduct(t),this.setLocalCartStorage(this.getCart()),this.getCart()}deleteProduct(t){var e;null===(e=this.cart.products)||void 0===e||delete e[t.title],this.setLocalCartStorage(this.getCart())}increaseProduct(t){return this.cart.products[t.title].amount+=1,this.cart.totalAmount+=1,this.cart.totalSum+=t.price,this.setLocalCartStorage(this.getCart()),this.getCart()}decreaseProduct(t){return this.cart.products[t.title].amount-=1,this.cart.totalAmount-=1,this.cart.totalSum-=t.price,this.setLocalCartStorage(this.getCart()),this.getCart()}isProductInCart(t){return!!this.cart.products[t]}applyPromoCode(t){this.cart.appliedPromoCodes.includes(t)||this.cart.appliedPromoCodes.push(t)}dropPromoCode(t){this.cart.appliedPromoCodes.includes(t)&&(this.cart.appliedPromoCodes=this.cart.appliedPromoCodes.filter((e=>e!==t)))}setLocalCartStorage(t){localStorage.setItem("cart",JSON.stringify(t))}},l=new class{updateTotalPrise(t){const e=document.querySelector(".header__price-total");e&&(e.innerText=`€${t}.00`)}updateTotalAmount(t){const e=document.querySelector(".header__cart-amount");e&&(e.innerText=`${t}`)}updateSummaryAmount(t){const e=document.querySelector(".cart-summary__amount-value");e&&(e.innerText=`${t}`)}updateSummarySum(t){const e=document.querySelector(".cart-summary__sum-value");e&&(e.innerText=`€${t}.00`)}showCartEmtyText(t){const e=i("div","cart-empty-text");e.innerText="There are no products in the cart.",t.append(e)}handleAddDropToCart(t,i){const r=e.find((t=>t.id===i));if(r)if(p.isProductInCart(r.title)){const{totalSum:e,totalAmount:i}=p.dropProduct(r);this.updateTotalPrise(e),this.updateTotalAmount(i),t.innerText="Add to cart"}else{const{totalSum:e,totalAmount:i}=p.addProduct(r);this.updateTotalPrise(e),this.updateTotalAmount(i),t.innerText="Drop from cart"}}handleIncreaseProduct(t,e,i,r){if(i.stock<=r)return;const{totalSum:a,totalAmount:o,products:n}=p.increaseProduct(i),d=n[i.title].amount;this.updateTotalPrise(a),this.updateTotalAmount(o),this.updateSummaryAmount(o),this.updateSummarySum(a),t.innerText=`${d}`,e.innerText="€"+d*i.price}handleDecreaseProduct(t,e,i,r,a){const{totalSum:o,totalAmount:n,products:d}=p.decreaseProduct(r),s=d[r.title].amount;this.updateTotalPrise(o),this.updateTotalAmount(n),this.updateSummaryAmount(n),this.updateSummarySum(o);const c=document.querySelector(".cart-page");if(p.getCart().totalAmount<=0&&c&&(c.innerHTML="",this.showCartEmtyText(c)),a<=1)return p.deleteProduct(r),void t.remove();e.innerText=`${s}`,i.innerText="€"+s*r.price}handleCartClick(t){const e=t.currentTarget;history.pushState("","",e.dataset.href),_()}handleApplyPromoCode(t){p.applyPromoCode(t)}handleDropPromoCode(t){p.dropPromoCode(t)}getLocalCartStorage(){p.getLocalCartStorage()}getCart(){return p.getCart()}isProductInCart(t){return p.isProductInCart(t)}},u=(t,e,i)=>{e.test(t)||(i.style.display="block")},m=(t,e,i)=>{e.test(t)&&"block"===i.style.display&&(i.style.display="none")},h=(t,e,i)=>{e.length>i&&(t.value=e.substring(0,i))},g=()=>{const t=i("div","modal"),e=i("h4"),r=(()=>{const t=i("div","personal-details"),e=i("div","modal-row"),r=i("input","modal-input"),a=i("p","error"),o=i("div","modal-row"),n=i("input","number-input"),d=i("p","error"),s=i("div","modal-row"),c=i("input","adress-input"),p=i("p","error"),l=i("div","modal-row"),h=i("input","email-input"),g=i("p","error");return r.placeholder="Name",a.textContent="Name error",n.type="tel",n.placeholder="Phone number",d.textContent="Number error",c.placeholder="Devilery address",p.textContent="Adress error",h.type="email",h.placeholder="E-mail",g.textContent="E-mail error",t.appendChild(e),e.appendChild(r),e.appendChild(a),t.appendChild(o),o.appendChild(n),o.appendChild(d),t.appendChild(s),s.appendChild(c),s.appendChild(p),t.appendChild(l),l.appendChild(h),l.appendChild(g),r.addEventListener("change",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();u(i,/^[A-Z]{1}[a-z]{2,}\s+[A-Z]{1}[a-z]{2,}/,a)})),r.addEventListener("input",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();m(i,/^[A-Z]{1}[a-z]{2,}\s+[A-Z]{1}[a-z]{2,}/,a)})),n.addEventListener("change",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();u(i,/^\+\d{9,}$/,d)})),n.addEventListener("input",(t=>{const e=t.target,i=e.value.trim();/^\+\d*$/.test(i)||(e.value=i.substring(0,i.length-1)),m(i,/^\+\d{9,}/,d)})),c.addEventListener("change",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();u(i,/^[A-Za-z]{5,}\s+[[A-Za-z]{5,}\s+[[A-Za-z]{5,}/,p)})),c.addEventListener("input",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();m(i,/^[A-Za-z]{5,}\s+[[A-Za-z]{5,}\s+[[A-Za-z]{5,}/,p)})),h.addEventListener("change",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();u(i,/^\S+@\S+\.\S+$/,g)})),h.addEventListener("input",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();m(i,/^\S+@\S+\.\S+$/,g)})),t})(),a=i("h4"),n=(()=>{const t=i("div","card-details"),e=i("div","card-details__top-row"),r=i("div","card-details__card-img-container"),a=i("img","card-img"),o=i("input","card-details__number-input"),n=i("p","error"),d=i("div","card-details__bottom-row"),s=i("div","card-details__deta-container"),c=i("label","card-details__date-label"),p=i("input","card-details__date-input"),l=i("p","error"),g=i("div","card-details__cvv-container"),C=i("label","card-details__number-label"),v=i("input","card-details__cvv-input"),y=i("p","error");return a.src="",o.type="number",o.placeholder="Card number",n.textContent="number error",p.placeholder=" MM/YY",l.textContent="valid error",v.type="number",v.placeholder=" XXX",y.textContent="cvv error",t.appendChild(e),t.appendChild(d),e.appendChild(r),r.appendChild(a),e.appendChild(o),t.appendChild(n),d.appendChild(s),s.appendChild(c),s.appendChild(l),c.textContent="Valid:",c.appendChild(p),d.appendChild(g),g.appendChild(C),s.appendChild(y),C.textContent="CVV:",C.appendChild(v),o.addEventListener("change",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim(),r=i[0];("1"===r||"2"===r||"3"===r)&&(a.src=""),u(i,/^\d{16}$/,n)})),o.addEventListener("input",(t=>{const e=t.target,i=e.value.trim();h(e,i,16),m(i,/^\d{16}$/,n)})),p.addEventListener("change",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();u(i,/^\d{1}[0-2]{1}\/\d{2}$/,l)})),p.addEventListener("input",(t=>{const e=t.target,i=e.value.trim(),r=i[i.length-1];isNaN(+r)&&"/"!==r&&(e.value=i.substring(0,i.length-1)),2!==i.length||isNaN(+i[0])||isNaN(+i[1])||(e.value+="/"),h(e,i,5),m(i,/^\d{1}[0-2]{1}\/\d{2}$/,l)})),v.addEventListener("change",(t=>{var e;const i=null===(e=t.target)||void 0===e?void 0:e.value.trim();u(i,/^\d{3}$/,y)})),v.addEventListener("input",(t=>{const e=t.target,i=e.value.trim();h(e,i,3),m(i,/^\d{3}/,y)})),t})(),d=(()=>{const t=o("modal-btn","modal btn");return t.addEventListener("click",(()=>{return t="/cart",console.log(t),history.pushState("","",t),void _();var t})),t})();return a.textContent="Credit card details",e.textContent="Product details",t.appendChild(e),t.appendChild(r),t.appendChild(a),t.appendChild(n),t.appendChild(d),t},C=t=>{const[e,r]=a("details-block","details-title",t.title);r.classList.add("product-details__block-main");const n=(t=>{const e=i("div","product-details__images"),r=i("div","product-details__small-images-container"),a=i("div","product-details__big-image-container");return t.images.forEach(((t,e)=>{if(0===e){const e=i("img","big-image");e.src=t,a.appendChild(e)}const o=i("img","small-image");o.src=t,r.appendChild(o),o.addEventListener("click",(t=>{const e=document.querySelector(".big-image"),i=t.target;e&&i&&(e.src=i.src)}))})),e.appendChild(r),e.appendChild(a),e})(t),d=(t=>{const e=i("div","product-details__data"),[r,o]=a("description-block","description-block-title","Desctiption"),[n,d]=a("description-block","description-block-title","Discount"),[s,c]=a("description-block","description-block-title","Rating"),[p,l]=a("description-block","description-block-title","Stock"),[u,m]=a("description-block","description-block-title","Brand"),[h,g]=a("description-block","description-block-title","Category");return o.textContent=t.description,d.textContent=String(t.discountPercentage),c.textContent=String(t.rating),l.textContent=String(t.stock),m.textContent=t.brand,g.textContent=t.category,e.appendChild(r),e.appendChild(n),e.appendChild(s),e.appendChild(p),e.appendChild(u),e.appendChild(h),e})(t),s=(t=>{const e=i("div","product-details__cart"),r=l.isProductInCart(t.title)?"Drop from cart":"Add to cart",a=i("p","product-details__price"),n=o("product-details-btn",r),d=o("product-details-btn","Buy now");return n.classList.add("product-details-cart-btn"),d.classList.add("product-details-buy-btn"),a.textContent=`€${t.price}.00`,e.appendChild(a),e.appendChild(n),e.appendChild(d),n.addEventListener("click",(()=>l.handleAddDropToCart(n,t.id))),d.addEventListener("click",(()=>{history.pushState("","","/cart"),_();const t=g(),e=document.querySelector("main");null==e||e.appendChild(t)})),e})(t);return r.appendChild(n),r.appendChild(d),r.appendChild(s),e},v=t=>{const r=e.find((e=>e.id===t));if(!r)return;const a=i("div","product-details"),o=(t=>{const e=i("div","product-details__navigator"),r=i("p","product-details__arrows");r.textContent=">>";const a=r.cloneNode(!0),o=r.cloneNode(!0),n=i("p"),d=i("p"),s=i("p"),c=i("p");return n.textContent="store",d.textContent=`${t.category}`,s.textContent=`${t.brand}`,c.textContent=`${t.title}`,e.appendChild(n),e.appendChild(r),e.appendChild(d),e.appendChild(a),e.appendChild(s),e.appendChild(o),e.appendChild(c),e})(r),n=C(r);return a.appendChild(o),a.appendChild(n),a},y=new URL(window.location.href).search.substring(1).split("&"),b=new class{constructor(t){this.cart=t,this.root=i("div","cart-page"),this.productsInner=i("div","cart-products__inner"),this.summarySum=i("div","cart-summary__sum"),this.summaryNewSum=i("div","cart-summary__sum_new"),this.promoAppliedBlock=i("div","cart-summary__promo-applied"),this.summaryPromoInput=i("input","cart-summary__promo-input"),this.promoBlock=i("div","cart-summary__promo-block"),this.url=new URL(window.location.href),this.params=this.url.search.substring(1).split("&")}createEmptyCartText(){const t=i("div","cart-empty-text");return t.innerText="There are no products in the cart.",t}createProductSection(){const t=i("div","cart-products");return t.append(this.createProductSectionHeader(),this.productsInner),this.renderCartProducts(this.params),t}createProductSectionHeader(){const t=i("div","cart-products__header"),e=i("h2","cart-products__header-title");return e.innerText="Products In Cart",t.append(e),t.appendChild(this.renerPluginsBlock()),t}createCartProduct(t,e,r){const a=i("div","cart-products__item"),n=i("div","cart-products__item-number"),d=i("div","cart-products__item-inner"),s=i("div","cart-products__item-controls"),c=i("img","cart-products__item-img"),p=i("h3","cart-products__item-title"),u=i("div","cart-products__item-description"),m=i("div","cart-products__item-text"),h=i("div","cart-products__item-info"),g=i("div","cart-products__item-price"),C=i("div","cart-products__item-raiting"),v=i("div","cart-products__item-discount"),y=i("div","cart-products__item-stock"),b=i("div","cart-products__item-totalPrice"),_=i("div","cart-products__controls-inner"),S=o("cart-products__item-btn_plus","+"),P=o("cart-products__item-btn_minus","-"),f=i("div","cart-products__item-amount");return n.innerText=`${t}`,c.src=e.thumbnail,p.innerText=e.title,m.innerText=e.description,g.innerText=`€${e.price}`,v.innerText=`Discount: ${e.discountPercentage}%`,C.innerText=`Raiting: ${e.rating}`,y.innerText=`Stock: ${e.stock}`,b.innerText=`€${e.price*r}.00`,f.innerText=`${r}`,h.append(g,C,v),u.append(p,m,h),d.append(c,u),_.append(S,f,P),s.append(y,_,b),a.append(n,d,s),S.addEventListener("click",(()=>{const t=this.cart.products[e.title].amount;l.handleIncreaseProduct(f,b,e,t)})),P.addEventListener("click",(()=>{const t=this.cart.products[e.title].amount;l.handleDecreaseProduct(a,f,b,e,t)})),a}createCartSummary(t,e){const r=i("div","cart-summary"),a=i("div","cart-summary__header"),n=i("h2","cart-summary__header-title"),d=i("div","cart-summary__inner"),s=i("div","cart-summary__amount"),c=i("span","cart-summary__amount-value"),p=i("span","cart-summary__sum-value"),l=i("div","cart-summary__promo-codes"),u=o("cart-summary__button","Buy now"),m=Object.keys(this.cart.promoCodes).map((t=>`'${t.toUpperCase()}'`)).join(", ");return n.innerText="Summary",s.innerText="Products: ",this.summarySum.innerText="Total: ",c.innerText=`${t}`,p.innerText=`€${e}.00`,this.summaryPromoInput.type="search",this.summaryPromoInput.placeholder="Enter promo code",l.innerText=`Promo for test: ${m}`,a.append(n),s.append(c),this.summarySum.append(p),d.append(s,this.summarySum,this.summaryNewSum,this.promoAppliedBlock,this.summaryPromoInput,this.promoBlock,l,u),r.append(a,d),this.summaryPromoInput.addEventListener("input",this.onInputPromo.bind(this)),r}onInputPromo(t){const e=t.target.value.toLowerCase(),i=Object.keys(this.cart.promoCodes);this.promoBlock.innerHTML="",i.includes(e)&&this.fillPromoBlock(e)}fillPromoBlock(t){const e=i("span","cart-summary__promo-block-text"),r=o("cart-summary__promo-block-btn","add"),a=!!this.cart.appliedPromoCodes.includes(t),n=this.cart.promoCodes[t];e.innerText=`${t.toUpperCase()} - ${n}%`,this.promoBlock.append(e),a||(this.promoBlock.append(r),r.addEventListener("click",(()=>{l.handleApplyPromoCode(t),this.fillPromoAppliedBlock(),this.updateTotalPrice(),this.summaryPromoInput.value="",this.promoBlock.innerHTML=""})))}updateTotalPrice(){let t=0;for(const e of this.cart.appliedPromoCodes)t+=this.cart.promoCodes[e];const e=this.cart.totalSum,i=e-e*t/100;this.cart.appliedPromoCodes.length?(this.summarySum.style.textDecoration="line-through",this.summaryNewSum.innerText=`Total: €${i.toFixed(2)}`):(this.summarySum.style.textDecoration="none",this.summaryNewSum.innerText="")}fillPromoAppliedBlock(){if(this.promoAppliedBlock.innerHTML="",this.cart.appliedPromoCodes.length){const t=i("div","cart-summary__promo-applied-header"),e=this.cart.appliedPromoCodes.map((t=>this.createPromoAppliedItem(t,this.cart.promoCodes[t])));t.innerText="Applied codes",this.promoAppliedBlock.append(t,...e)}}createPromoAppliedItem(t,e){const r=i("div","cart-summary__promo-applied-item"),a=i("span","cart-summary__promo-applied-text"),n=o("cart-summary__promo-applied-btn","drop");return a.innerText=`${t.toUpperCase()} - ${e}%`,r.addEventListener("click",(()=>{l.handleDropPromoCode(t),this.updateTotalPrice(),this.fillPromoAppliedBlock(),r.remove(),this.summaryPromoInput.value="",this.promoBlock.innerHTML=""})),r.append(a,n),r}renerPluginsBlock(){var t,e;const r=new URL(window.location.href).search.substring(1).split("&"),a=null===(t=r.find((t=>t.includes("limit="))))||void 0===t?void 0:t.split("=")[1],n=null===(e=r.find((t=>t.includes("page="))))||void 0===e?void 0:e.split("=")[1],d=i("div","plugins-block"),s=i("div","limit-counter"),c=i("input","limit-input");s.textContent="LIMIT",c.type="number",c.value=a||"3";const p=i("div","page-counter"),l=o("less-btn","<"),u=i("span","page-counter-number"),m=o("more-btn",">");p.textContent="PAGE",u.textContent=n||"1",d.appendChild(s),d.appendChild(p),s.appendChild(c),p.appendChild(l),p.appendChild(u),p.appendChild(m);const h=t=>{const e=t.target,i=+(null==e?void 0:e.value),r=Object.values(this.cart.products).map((t=>Object.values(t))).length;return i>r?e.value=String(r):i<1?e.value="1":void(()=>{let t=new URL(window.location.href).search.substring(1).split("&");window.location.href.includes("limit=")?t=t.map((t=>t.includes("limit")?`limit=${i}`:t)):(t.push(`limit=${i}`),t[0]||t.shift()),this.renderCartProducts(t)})()},g=t=>{const e=t.target,i=Object.values(this.cart.products).map((t=>Object.values(t))).length;if(!u.textContent)return;const r=+u.textContent;e.className.includes("more-btn")?r<i/+c.value&&(u.textContent=String(r+1)):u.textContent=String(r<2?"1":r-1),(()=>{let t=new URL(window.location.href).search.substring(1).split("&");window.location.href.includes("page=")?t=t.map((t=>t.includes("page")?`page=${u.textContent}`:t)):(t.push(`page=${u.textContent}`),t[0]||t.shift()),this.renderCartProducts(t)})()};return c.addEventListener("input",(t=>h(t))),l.addEventListener("click",(t=>g(t))),m.addEventListener("click",(t=>g(t))),d}renderCartProducts(t){var e;null===(e=t.find((t=>t.includes("page="))))||void 0===e||e.split("=")[1],Object.values(this.cart.products).map(((t,e)=>this.createCartProduct(e+1,t.product,t.amount)))}getRoot(){return this.root}mount(){this.root.innerHTML="",localStorage.getItem("cart")&&l.getLocalCartStorage(),this.cart.totalAmount<=0?this.root.append(this.createEmptyCartText()):this.root.append(this.createProductSection(),this.createCartSummary(this.cart.totalAmount,this.cart.totalSum))}}(p.getCart()),_=()=>{const t=document.querySelector(".main");if(!t)return;t.innerHTML="";const r=window.location.pathname;if("/"===r||r.includes("/?")){const r=(t=>{const e=i("div","start-page"),r=s(t),a=c();return e.appendChild(r),e.appendChild(a),e})(e);t.appendChild(r),T(y)}else if(r.includes("/about")){const e=v(+r.split("/")[2]);e&&t.appendChild(e)}else r.includes("/cart")&&(t.append(b.getRoot()),b.mount())};window.addEventListener("popstate",_),window.addEventListener("DOMContentLoaded",_);const S=(t,e,r,n,d,s,c,p,u)=>{const m=document.querySelectorAll(".grid-size")[0].classList.contains("active"),[h,g]=a("product-card","product-title",e),C=i("div","product-img-container"),v=((t,e)=>{const r=l.isProductInCart(e)?"Drop from cart":"Add to cart",a=i("div","product-buttons"),n=o("cart-btn",r),d=o("details-btn","Details");return n.dataset.id=String(t),d.dataset.id=String(t),d.dataset.href="/about",n.addEventListener("click",(()=>l.handleAddDropToCart(n,t))),d.addEventListener("click",(t=>{var e,i;return i=`about/${null===(e=t.target)||void 0===e?void 0:e.dataset.id}`,history.pushState("","",i),void _()})),a.appendChild(n),a.appendChild(d),a})(t,e);if(h.style.width=m?"23%":"15%",h.style.height=m?"auto":"120px",C.style.width="100%",C.style.height=m?"250px":"70px",C.style.backgroundPosition="center",C.style.backgroundImage=`url(${u})`,C.style.backgroundSize="cover",C.style.backgroundPosition="center",g.appendChild(C),m){const t=i("div","product-about"),e=i("p","product-about-item"),a=i("p","product-about-item"),o=i("p","product-about-item"),l=i("p","product-about-item"),u=i("p","product-about-item"),m=i("p","product-about-item");e.textContent=`Category: ${r}`,a.textContent=`Brand: ${n}`,o.textContent=`Price: $${d}.00`,l.textContent=`Discound: ${s}`,u.textContent=`Rating: ${c}`,m.textContent=`Stock: ${p}`,g.appendChild(t),t.appendChild(e),t.appendChild(a),t.appendChild(o),t.appendChild(l),t.appendChild(u),t.appendChild(m)}return g.appendChild(v),h},P=(t,e,i)=>{document.querySelectorAll(i).forEach((i=>{const r=t.filter((t=>{var r;return(null===(r=i.dataset.id)||void 0===r?void 0:r.toUpperCase())===String(t[e]).toUpperCase()})).length;i.textContent=`${r}`}))},f=(t,e,i,r,a,o,n)=>{const d=document.querySelector(r),s=document.querySelector(a),c=document.querySelector(o),p=document.querySelector(n);if(!(d&&s&&c&&p))return;let l=[];const u=e.find((t=>t.includes(`=${i}`)));l=u?u.split("=")[1].split("%E2%86%95").map((t=>+t)):t.map((t=>+t[i]));const m=Math.max(...l),h=Math.min(...l);isFinite(m)&&isFinite(h)&&(d.value=String(h),s.value=String(m),c.textContent=`${h}${"price"===i?"$":""}`,p.textContent=`${m}${"price"===i?"$":""}`)},x=t.p+"assets/933e6f5dac9bce4cf245.svg",j=t.p+"assets/4c0209afbf2166b62365.svg",k=(t,e,i)=>t.filter((t=>e.includes(String(t[i]).toLowerCase()))),w=(t,e,i,r)=>t.filter((t=>t[e]>=+i&&t[e]<=+r)),L=(t,e,i)=>{document.querySelectorAll(i).forEach((e=>e.checked=t.includes(e.value)))},$=document.querySelector("#root"),A=(()=>{const t=i("div","app"),e=(t=>{const e=i("header","header"),r=i("a","header__logo"),a=i("img","header__logo-img"),o=i("h1","header__logo-title"),n=i("h2","header__price"),d=i("span","header__price-total"),s=i("div","header__cart"),c=i("img","header__cart-img"),p=i("span","header__cart-amount");return a.src=x,o.innerText="Online Store",r.append(a),r.append(o),n.innerText="Cart total: ",d.innerText=`€${t.totalSum}.00`,n.appendChild(d),c.src=j,p.innerText=`${t.totalAmount}`,s.dataset.href="/cart",s.append(c),s.append(p),e.append(r),e.append(n),e.append(s),s.addEventListener("click",(t=>l.handleCartClick(t))),e})(l.getCart()),r=i("main","main");return t.append(e,r),t})();$&&$.appendChild(A);const T=t=>{let i=[...e];t.forEach((t=>{if(t.includes("sort=")&&(i=((t,e)=>{let i;return i=t.includes("price")?"price":t.includes("rating")?"rating":"discountPercentage",t.includes("ASC")?e.sort(((t,e)=>+t[i]-+e[i])):t.includes("DESC")?e.sort(((t,e)=>+e[i]-+t[i])):e})(t,i),(t=>{const e=document.querySelector(".sort-input");e&&(e.value=t.split("=")[1])})(t)),t.includes("search=")){const e=t.split("=")[1];i=((t,e)=>t.filter((t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.price.toString().includes(e)||t.brand.toLowerCase().includes(e)||t.category.toLowerCase().includes(e))))(i,e),(t=>{const e=document.querySelector(".search-input");e&&(e.value=t)})(e)}if(t.includes("price=")){const[e,r]=t.split("=")[1].split("%E2%86%95");i=w(i,"price",e,r)}if(t.includes("stock=")){const[e,r]=t.split("=")[1].split("%E2%86%95");i=w(i,"stock",e,r)}t.includes("category=")&&(i=k(i,t,"category"),L(t,0,".category__checkbox")),t.includes("brand=")&&(i=k(i,t,"brand"),L(t,0,".brand__checkbox"))}));const r=new URL(window.location.href).origin+(t[0]?"/?"+t.join("&"):"");window.history.pushState({path:r},"",r),((t,e)=>{(t=>{const e=document.querySelector(".products-section__title");e&&(e.textContent=`Found: ${t.length}`)})(t),P(t,"category",".category__avalible-items"),P(t,"brand",".brand__avalible-items"),f(t,e,"price",".lower-price-slider",".upper-price-slider",".lower-price-value",".upper-price-value"),f(t,e,"stock",".lower-stock-slider",".upper-stock-slider",".lower-stock-value",".upper-stock-value"),(t=>{const e=Array.from(document.querySelectorAll(".grid-size")),i=t.find((t=>t.includes("grid")));i?e.forEach((t=>{const e=t.dataset.size;e&&i.includes(e)?t.classList.add("active"):t.classList.remove("active")})):e.some((t=>t.classList.contains("active")))||e[0].classList.add("active")})(e),(t=>{const e=document.querySelector(".products-section__main");e&&(e.innerHTML="",t.length?t.forEach((t=>{const i=S(t.id,t.title,t.category,t.brand,t.price.toString(),t.discountPercentage.toString(),t.rating.toString(),t.stock.toString(),t.images[0]);e.appendChild(i)})):e.innerHTML="<h2>No products found :(</h2>")})(t)})(i,t)}})();